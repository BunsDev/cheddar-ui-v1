<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="./assets/favicon.ico" />
  <link rel="apple-touch-icon" href="./assets/favicon.ico" />
  <title>Cheddar Token</title>
  <link rel="stylesheet" href="global.css">
  <link rel="stylesheet" href="font-face.css">
  <link rel="stylesheet" href="faq.css">
</head>

<body>

  <header>
    <div><img src="./assets/cheddar-logo.svg" /></div>
    <nav>
      <a href="#" id="home">Home</a>
      <a href="#" id="unstake" class="hidden">Unstake</a>
      <a href="#" id="liquidity" class="hidden">Pool</a>
      <a href="#" id="delayed-unstake" class="hidden">Delayed-Unstake</a>
      <a href="#" id="faq">FAQ</a>
      <a href="#" id="my-account" class="user-info"><span id="account-id">not connected</span></a>
    </nav>
  </header>

  <main>

    <section id="home" style="display:none">

      <h2>1. Connect a Wallet to Stake</h2>

      <div id="wallet-selection">
        <div id="near-web-wallet-box" class="box wallet-box">
          <div class="near-logo wallet-logo"></div>
          <p>NEAR Web Wallet</p>
        </div>
        <div id="narwallets-wallet-box" class="box wallet-box">
          <div class="narwallets-logo wallet-logo" id="narwallets-logo-div"></div>
          <p>Narwallets<br>chrome-extension</p>
        </div>
      </div>

      <h2>2. Stake and Farm Cheddar</h2>
      <form id="stake-form-not-connected">
        <div class="icon-header">
          <img src="./assets/stakin-cheddar.svg" width="50px" height="50px">
          <span>Cheddar</span>
        </div>
        <div class="pool-meta">
          <div>Deposit Fee:</div>
          <div>0%</div>
        </div>
        <div class="pool-meta">
          <div>Earn:</div>
          <div>Cheddar</div>
        </div>
        <div class="pool-meta deposit">
          <div>APR:</div>
          <div></div>
        </div>
        <div class="pool-meta earned">
          <div class="">Cheddar</div>
          <div class="">Earned</div>
        </div>
        <div class="pool-meta earned amount">
          <div id="cheddar-balance">0</div>
          <div><button id="harvest" type="submit">Harvest</button></div>
        </div>
        <div class="pool-meta earned">
          <div class="">NEAR</div>
          <div class="">Staked</div>
        </div>
        <div class="pool-meta near amount">
          <div><span id="near-balance" class="near balance"></span></div>
          <div>&nbsp;</div>
        </div>
        <fieldset id="fieldset">
          <div class="input-group">
            <input class="near amount input-box" inputmode="numeric" placeholder="0" autocomplete="off" disabled>
            <span>NEAR Ⓝ</span>
          </div>
          <button type="submit" id="connect-wallet" disabled>Stake</button>
        </fieldset>
      </form>

    </section>

    <section id="home-connected" style="display:none">

      <h2>Stake NEAR to Earn Cheddar</h2>
      <p></p>
      <form id="stake">
        <div class="icon-header">
          <img src="./assets/stakin-cheddar.svg" width="50px" height="50px">
          <span>Cheddar</span>
        </div>
        <div class="pool-meta">
          <div>Deposit Fee:</div>
          <div>0%</div>
        </div>
        <div class="pool-meta">
          <div>Earn:</div>
          <div>Cheddar</div>
        </div>
        <div class="pool-meta  deposit">
          <div>APR:</div>
          <div id="apr"></div>
        </div>
        <div class="pool-meta earned">
          <div class="">Cheddar</div>
          <div class="">Earned</div>
        </div>
        <div class="pool-meta earned amount">
          <div id="cheddar-balance">0</div>
          <div><button id="harvest" type="submit">Harvest</button></div>
        </div>
        <div class="pool-meta earned">
          <div class="">NEAR</div>
          <div class="">Staked</div>
        </div>
        <div class="pool-meta earned amount">
          <div><span id="near-balance" class="near balance"></span></div>
          <div>&nbsp;</div>
        </div>
        <fieldset id="fieldset">
          <div class="input-group">
            <input id="stakeAmount" class="near amount input-box" inputmode="numeric" placeholder="0"
              autocomplete="off">
            <span id="max" class="inside-input">Max</span>
            <span>Ⓝ NEAR</span>
          </div>
          <div class="pool-meta wallet-balance">
            <div class="">Available to stake <span id="wallet-available" class="near balance"></span></div>
          </div>
          <div class="pool-meta actions">
            <div class="hQrVZb">
            <button id="unstake" class="gAaTZf" type="submit"><svg viewBox="0 0 15 2" color="white" width="20px" xmlns="http://www.w3.org/2000/svg" class="sc-bdnxRM eUMSBu"><path d="M13.2 2L1.20004 2C0.650043 2 0.200043 1.55 0.200043 1C0.200043 0.45 0.650043 0 1.20004 0L13.2 0C13.75 0 14.2 0.45 14.2 1C14.2 1.55 13.75 2 13.2 2Z"></path></svg>
            </button>
            <button id="stake" class="hwJKVX" type="submit"><svg viewBox="0 0 24 24" color="primary" width="20px" xmlns="http://www.w3.org/2000/svg" class="sc-bdnxRM eUMSBu"><path d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"></path></svg>
            </button>
          </div>
          </div>
        </fieldset>
      </form>


      <article id="meta-stats">
        <h4>Cheddar Token Stats</h4>
        <div class="stat-line">
          <dt>Total Cheddar Tokens</dt>
          <dd id="total-cheddar-tokens" class="near balance"></dd>
        </div>
        <!--<div class="stat-line">
      <dt>Historic Rewards</dt>
      <dd id="historic-rewards" class="near balance"></dd>
    </div>
    <div class="stat-line">
      <dt>Cheddar/NEAR Liquidity</dt>
      <dd id="liquidity-balance" class="near balance"></dd>
    </div>
  -->
      </article>

    </section>


    <section id="unstake" style="display:none">

      <h2>Liquid Unstake</h2>
      <p></p>
      <form id="unstake">
        <fieldset id="fieldset">
          <div class="input-group">
            <span>stⓃ</span>
            <input id="unstakeAmount" class="near amount input-box" inputmode="numeric"
              placeholder="cheddar amount to unstake" autocomplete="off">
            <span id="max" class="inside-input">Max</span>
          </div>
          <p>Fee <span id="liquidity-unstake-fee">%</span></p>
          <button type="submit">Liquid Unstake</button>
          <div class="tooltip">info <span class='info'><span>
                <div class="box tooltip-text">In order to skip the waiting period a fee is charged for Liquid Unstaking.
                  The fee varies based on the amount of liquidity available and the amount you want to unstake.</div>
          </div>
        </fieldset>
      </form>

      <article id="user-stats">
        <div class="stat-line">
          <dt>Available NEAR wallet</dt>
          <dd id="wallet-available" class="near balance"></dd>
        </div>
        <div class="stat-line">
          <dt>cheddar Tokens/Staked</dt>
          <dd id="cheddar-balance" class="near balance"></dd>
        </div>
        <div class="stat-line">
          <dt>$META Tokens</dt>
          <dd id="meta-balance" class="meta balance"></dd>
        </div>
      </article>

      <h5>Liquidity Pool Stats</h5>
      <article id="user-liquidity-pool-stats">
        <div class="stat-line">
          <dt>Current Liquidity</dt>
          <dd id="liquidity-balance" class="near balance"></dd>
        </div>
        <div class="stat-line">
          <dt>Target Liquidity</dt>
          <dd id="target-liquidity" class="near balance"></dd>
        </div>
      </article>

    </section>


    <section id="liquidity" style="display:none">

      <h2>NEAR/cheddar Pool</h2>
      <h5>Swap Fee <span id="liquidity-unstake-fee"></span></h5>
      <p></p>

      <article id="liquidity-pool-stats">
        <div class="stat-line">
          <dt>Target Liquidity</dt>
          <dd id="target-liquidity" class="near balance"></dd>
        </div>
        <div class="stat-line">
          <dt>Current Liquidity</dt>
          <dd id="liquidity-balance" class="near balance"></dd>
        </div>
        <div class="stat-line">
          <dt>cheddar in the Pool</dt>
          <dd id="liquidity-cheddar-balance" class="near balance"></dd>
        </div>
      </article>

      <article id="user-liquidity-pool-stats">
        <div class="stat-line">
          <div class="line-left">
            <span class="bold large near" id="your-share-value"></span>
            <span>Your share value</span>
          </div>
          <div class="line-right"><button type="button" id="add-liquidity">Add Liquidity</button> <button type="button"
              id="remove-liquidity">Remove</button> </div>
        </div>
        <div class="stat-line">
          <div class="line-left">
            <span class="bold large pct" id="your-share"></span>
            <span>Your share of the Liquidity Pool</span>
          </div>
          <div class="line-right"> </div>
        </div>
      </article>

      <article id="user-stats">
        <div class="stat-line">
          <dt>Available NEAR wallet</dt>
          <dd id="wallet-available" class="near balance"></dd>
        </div>
        <div class="stat-line">
          <dt>cheddar Tokens/Staked</dt>
          <dd id="cheddar-balance" class="near balance"></dd>
        </div>
      </article>


    </section>


    <section id="delayed-unstake" style="display:none">

      <h2>Delayed Unstake</h2>
      <p></p>
      <form id="delayed-unstake">
        <fieldset id="fieldset">
          <div class="input-group">
            <span>stⓃ</span>
            <input id="amountElem" class="near amount input-box" inputmode="numeric"
              placeholder="cheddar amount for delayed-unstake" autocomplete="off">
            <span id="max" class="inside-input">Max</span>
          </div>
          <button type="submit">Start delayed unstake</button>
          <div class="tooltip">info <span class='info'><span>
                <div class="box tooltip-text">Delayed unstake will lock your funds for 2-6 days. <b>You will not receive
                    rewards during that period.</b> After the waiting period is over, your funds will be available for
                  withdraw.</div>
          </div>
        </fieldset>
      </form>

      <article id="user-stats">
        <div class="stat-line">
          <dt>Available NEAR wallet</dt>
          <dd id="wallet-available" class="near balance"></dd>
        </div>
        <div class="stat-line">
          <dt>cheddar Tokens/Staked</dt>
          <dd id="cheddar-balance" class="near balance"></dd>
        </div>
      </article>

      <article id="delayed-unstake-info-group">
        <div class="stat-line">
          <div class="line-left">
            <span class="bold large near" id="delayed-unstake-amount"></span>
            <span>Unstaked waiting</span>
          </div>
          <div class="line-right"> </div>
        </div>
        <div class="stat-line">
          <div class="line-left">
            <span class="bold large">
              <span>~</span><span id="delayed-unstake-hours"></span> <span>hs</span>
            </span>
            <span>Hours remaining</span>
          </div>
          <div class="line-right"><button type="button" disabled id="delayed-withdraw-unstaked">Withdraw</button> </div>
        </div>
        <div class="stat-line" id="delayed-unstake-when-line">
          <div class="line-left">
            <span class="bold large" id="delayed-unstake-when"></span>
            <span>Wait finishes</span>
          </div>
          <div class="line-right"> </div>
        </div>
      </article>

    </section>

    <section id="faq" style="display:none">

      <h2>FAQ</h2>

      <article>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>Why stake in this beautiful meta-staking pool?
          </div>
          <div class="collapsed">Several Reasons:<ul>
              <li>You <i>tokenize your stake</i> so now you can use cheddar in the emerging NEAR DEFI market while you
                keeping earning staking rewards. Liberate your stake!!</li>
              <li>Once you stake here, you can do <i>Liquid Unstakes</i>, meaning you can get your NEAR back without
                waiting several days</li>
              <li>You avoid putting all eggs in one basket. This contract distributes it’s delegated funds into several
                validators, so you greatly reduce the risk of getting no-rewards due to validator outages</li>
              <li>By distributing stake, you contribute to decentralization and censorship-resistance for the NEAR
                protocol</li>
              <li>You get $META governance tokens automatically while using this contract</li>
            </ul>
          </div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>
            What's cheddar?
          </div>
          <div class="collapsed"><b>cheddar</b> means staked-NEAR, is the NEP-141 token this contract manages,
            representing your staked-NEAR. After staking, you can use your cheddar in other markets while still earning
            rewards. After each epoch, you'll get <i>more cheddar</i> as staking-rewards, just by holding cheddar
          </div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>
            Are there rewards for early adopters?
          </div>
          <div class="collapsed">Yes. The first several epochs of the contract in mainnet, there will be special
            multipliers for early adopters:<ul>
              <li> If you make a liquid unstake you get 5x $META per each NEAR in fees</li>
              <li> If you stake and hold cheddar, you get 10x $META from staking rewards</li>
              <li> Liquidity Providers get 50x $META per each NEAR of earned fee </li>
            </ul>
          </div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>
            How does the "Liquid Unstake" works?
          </div>
          <div class="collapsed">Within the contract there's a <i>Liquidity Pool</i>, the pool works like an
            "single-direction swap pool" allowing you to enter <b>cheddar</b>(staked-NEAR) in the pool and get NEAR back
            after paying a "swap fee". The fee decreases when there's liquidity in the pool and reaches minimum when the
            liquidity target is reached.
          </div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>Who's providing the Liquidity?
          </div>
          <div class="collapsed">Anyone can provide liquidity and earn fees in the process. Check the "Pool" section.
          </div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>What's "Delayed-Unstake"?
          </div>
          <div class="collapsed">In the NEAR blockchain, validating stakers can not remove their stake immediately and
            must wait some period to do so. Waiting periods can be from 2 to 4 days.
          </div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>Why my staking is not reflected in the "staking" section of my NEAR Wallet?
          </div>
          <div class="collapsed">Good question! The meta-pool staking is reflected in you holding <b>cheddar tokens</b>,
            it will not be reflected in the wallet as "staking", it will be reflected as <b>cheddar tokens</b>
          </div>
        </label>


        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>What's the reward trip-meter?
          </div>
          <div class="collapsed">This contract allows you to precisely measure staking-rewards. If you click in your
            account (top-right), you'll see the exact amount of rewards you've received while holding <b>cheddar</b>
            even if you staked and unstaked several times
          </div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>I want to know more about the meta-pool
          </div>
          <div class="collapsed">See more documentation <a href="https://narwallets.github.io/meta-pool/">here</a>.
          </div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>Beta-Testing: Where's the old version?, I want to unstake and move to the new
            version
          </div>
          <div class="collapsed">Cheddar Token V1 is at <a target="blank"
              href="https://narwallets.com/dapp/testnet/meta-v1/">narwallets.com/dapp/testnet/meta-v1</a></div>
        </label>

        <label class="collapsible">
          <input type="checkbox" />
          <div class="collapser">
            <span class="arrow"></span>What's the Answer to the Ultimate Question of Life, the Universe, and Everything?
          </div>
          <div class="collapsed">42.</div>
        </label>

      </article>

    </section>

    <section id="my-account" style="display:none">

      <h2>My account</h2>

      <article>
        <div class="stat-line">
          <div class="line-left">
            <span id="wallet-available" class="bold large near"></span>
            <span>Available NEAR wallet</span>
          </div>
          <div class="line-right"><button type="button" id="sign-out">Sign Out</button> </div>
      </article>

      <article>
        <div class="stat-line">
          <div class="line-left">
            <span id="cheddar-balance" class="bold large near"></span>
            <span>cheddar Tokens/Staked</span>
          </div>
          <!--<div class="line-right"><button type="button" id="unstake-from-my-account">Liquid Unstake</button> </div>-->
        </div>

        <!--<div class="stat-line">
          <div class="line-left">
            <span id="trip-rewards" class="bold large near"></span>
            <span>Rewards since</span> <span id="trip-start"></span>
          </div>
          <div class="line-right"> </div>
        </div>

        <div class="stat-line">
          <div class="line-left">
            <span id="meta-balance" class="bold large meta"></span>
            <span>$META Tokens</span> <span id="trip-start"></span>
          </div>
          <div class="line-right">
            <button type="button" id="harvest-meta">Harvest</button> 
          </div>
        </div>
        -->
      </article>

    </section>

  </main>

  <!----- OVERLAY POPUPS ----->
  <div class="overlay" id="overlay1" style="display:none">

    <div id="add-liquidity" class="box popup" style="display:none">
      <h3>Add Liquidity</h3>
      <h5>Available <span id="wallet-available"></span>&nbsp;Ⓝ</h5>
      <form id="add-liquidity">
        <fieldset id="fieldset">
          <div class="input-group">
            <span>Ⓝ</span>
            <input id="amountElem" class="near amount input-box" inputmode="numeric" placeholder="Amount"
              autocomplete="off">
          </div>
          <div class="confirm-cancel-line">
            <button type="submit" id="confirm">confirm</button>
            <button type="button" id="cancel" class="hollow">cancel</button>
          </div>
        </fieldset>
      </form>
      <div class="footer-note">By adding liquidity you'll receive a share of the liquidity pool. On each liquid unstake
        you'll get a proportion of the fees and also $META tokens</div>
    </div>

    <div id="remove-liquidity" class="box popup" style="display:none">
      <h3>Remove Liquidity</h3>
      <h5>Your share value<span id="your-share-value"></span>&nbsp;Ⓝ</h5>
      <form id="remove-liquidity">
        <fieldset id="fieldset">
          <div class="input-group">
            <span>Ⓝ</span>
            <input id="amountElem" class="near amount input-box" inputmode="numeric" placeholder="Amount"
              autocomplete="off">
            <span id="max" class="inside-input">Max</span>
          </div>
          <div class="confirm-cancel-line">
            <button type="submit" id="confirm">confirm</button>
            <button type="button" id="cancel" class="hollow">cancel</button>
          </div>
        </fieldset>
      </form>
      <div class="footer-note">By removing liquidity you'll NEAR and cheddar in proportion of your share of the
        liquidity pool.</div>
    </div>

    <div id="delayed-unstake-confirm" class="box popup" style="display:none">
      <h3>Start Delayed Unstake</h3>
      <div class="header-note"></div>
      <form id="delayed-unstake-confirm">
        <h4>Start delayed-unstake process for stⓃ<span id="amount"></span></h4>
        <fieldset id="fieldset">
        </fieldset>
        <div class="confirm-cancel-line">
          <button type="submit" id="confirm">confirm</button>
          <button type="button" id="cancel" class="hollow">cancel</button>
        </div>
      </form>
      <div class="footer-note">After the waiting period is over, the funds will be available for withdraw.</div>
    </div>

    <div id="delayed-unstake-warning" class="box popup" style="display:none">
      <h3 id="title">Wait!</h3>
      <img class="icon" src="assets/warning.svg"></img>
      <p id="msg">Your previous delayed-unstake is available.</p>
      <p>You should withdraw first</p>
      <div class="confirm-cancel-line">
        <button type="button" id="withdraw-now" class="">Withdraw Now</button>
        <button type="button" id="cancel" class="hollow close-popup">close</button>
      </div>
    </div>

    <!-- generic popups -->

    <div id="wait-box" class="box popup" style="display:none">
      <h3 id="title">Sending transaction...</h3>
      <div class="spinner"></div>
      <p id="msg">wait...</p>
      <!--<button type="button" id="cancel" class="hollow">close</button>-->
    </div>

    <div id="success-box" class="box popup" style="display:none">
      <h3 id="title">Confirmed</h3>
      <img class="confirmed"></img>
      <p id="msg">Confirmed</p>
      <button type="button" id="cancel" class="hollow close-popup">close</button>
    </div>

    <div id="message-box" class="box popup" style="display:none">
      <h3 id="title">Cheddar Token</h3>
      <img class="icon" src='assets/info.svg' />
      <p id="msg">Information</p>
      <button type="button" id="cancel" class="hollow close-popup">close</button>
    </div>

    <div id="error-box" class="box popup" style="display:none">
      <h3 id="title">Error</h3>
      <img class="icon" src="assets/warning.svg"></img>
      <p id="msg">message</p>
      <button type="button" id="cancel" class="hollow close-popup">close</button>
    </div>

  </div>

  <script src="./index.ts"></script>
</body>

</html>